@PACKAGE_INIT@

include(CMakeFindDependencyMacro)

# Find required dependencies
find_dependency(glm CONFIG REQUIRED)
find_dependency(nlohmann_json CONFIG REQUIRED)
# Add other shared dependencies as needed

# Include our targets
include("${CMAKE_CURRENT_LIST_DIR}/OxideTargets.cmake")

# Recreate the build interface for consumers
if(NOT TARGET oxide::build)
    add_library(oxide_build INTERFACE IMPORTED)
    set_target_properties(oxide_build PROPERTIES
        INTERFACE_COMPILE_FEATURES cxx_std_23
    )
    add_library(oxide::build ALIAS oxide_build)
endif()

# Define available components
set(oxide_AVAILABLE_COMPONENTS core crypto asset physics audio protocol render ui)

# Check requested components
foreach(_comp ${oxide_FIND_COMPONENTS})
    if(NOT _comp IN_LIST oxide_AVAILABLE_COMPONENTS)
        set(oxide_FOUND FALSE)
        set(oxide_NOT_FOUND_MESSAGE "Unsupported component: ${_comp}")
    endif()
    
    # Check if the target exists
    if(NOT TARGET oxide::${_comp})
        set(oxide_${_comp}_FOUND FALSE)
        if(oxide_FIND_REQUIRED_${_comp})
            set(oxide_FOUND FALSE)
            set(oxide_NOT_FOUND_MESSAGE "Required component not found: ${_comp}")
        endif()
    else()
        set(oxide_${_comp}_FOUND TRUE)
    endif()
endforeach()

check_required_components(oxide)